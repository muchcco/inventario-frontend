<div class="modal fade" id="modalProducto" tabindex="-1" aria-labelledby="modalProductoLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form (ngSubmit)="guardar()" #productoForm="ngForm">
          <div class="modal-header">
            <h5 class="modal-title" id="modalProductoLabel">
              {{ modo === 'crear' ? 'Nuevo Producto' : modo === 'editar' ? 'Editar Producto' : 'Detalle del Producto' }}
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"
                            aria-label="Cerrar" (click)="resetearFormulario()"></button>
  
          </div>
          <div class="modal-body">
  
            <!-- Campo: Código -->
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="codigo" name="codigo"
                     [(ngModel)]="producto.codigo" #codigo="ngModel" required [readonly]="modo === 'ver'"
                     [ngClass]="{ 'is-invalid': codigo.invalid && codigo.touched }">
              <label for="codigo">Código</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>
  
            <!-- Campo: Nombre -->
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="nombre" name="nombre"
                     [(ngModel)]="producto.nombre" #nombre="ngModel" required [readonly]="modo === 'ver'"
                     [ngClass]="{ 'is-invalid': nombre.invalid && nombre.touched }">
              <label for="nombre">Nombre</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>
    
            <!-- Campo: Familia como select -->
            <div class="form-floating mb-3">
              <select class="form-select" id="familia_id" name="familia_id"
                      [(ngModel)]="producto.familia_id" #familia_id="ngModel" required [disabled]="modo === 'ver'"
                      [ngClass]="{ 'is-invalid': familia_id.invalid && familia_id.touched }">
                <option value="">Seleccionar una familia</option>
                <option *ngFor="let fam of familias" [value]="fam.familia_id">
                  {{ fam.nombre }}
                </option>
              </select>
              <label for="familia_id">Familia</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>

            <!-- Campo: Unidad de medida como select -->
            <div class="form-floating mb-3">
              <select class="form-select" id="unidad_id" name="unidad_id"
                      [(ngModel)]="producto.unidad_id" #unidad_id="ngModel" required [disabled]="modo === 'ver'"
                      [ngClass]="{ 'is-invalid': unidad_id.invalid && unidad_id.touched }">
                <option value="">Seleccionar una unidad</option>
                <option *ngFor="let um of unidades" [value]="um.unidad_id">
                  {{ um.nombre }}
                </option>
              </select>
              <label for="unidad_id">Unidad de medida</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>
  
            <!-- Campo: Stock Mínimo-->
            <div class="form-floating mb-3">
              <input type="number" step="0.01" class="form-control" id="stock_minimo" name="stock_minimo"
                     [(ngModel)]="producto.stock_minimo" #stock_minimo="ngModel" required [readonly]="modo === 'ver'"
                     [ngClass]="{ 'is-invalid': stock_minimo.invalid && stock_minimo.touched }">
              <label for="precio_unitario">Stock Mínimo</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>

            <!-- Campo: Precio -->
            <div class="form-floating mb-3">
              <input type="number" step="0.01" class="form-control" id="precio" name="precio"
                    [(ngModel)]="producto.precio" #precio="ngModel" required [readonly]="modo === 'ver'"
                    [ngClass]="{ 'is-invalid': precio.invalid && precio.touched }">
              <label for="precio">Precio</label>
              <div class="invalid-feedback">Campo obligatorio</div>
            </div>
  
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary"
                      data-bs-dismiss="modal" (click)="resetearFormulario()">Cancelar</button>
  
            <button *ngIf="modo !== 'ver'" type="submit" class="btn btn-success" [disabled]="productoForm.invalid">
              Guardar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
  